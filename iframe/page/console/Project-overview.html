<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>项目总览</title>
    <link rel="stylesheet" href="/SKYWORTH_PMS/iframe/assets/libs/layui/css/layui.css"/>
    <link rel="stylesheet" href="/SKYWORTH_PMS/iframe/assets/module/admin.css?v=312"/>
    <style>
        .layui-form-label{
            padding: 9px 5px;
        }
        .layui-inline{
           margin-right: 16px;
        }
        .layui-form-item .layui-input-inline{
            width: 160px;
        }
    </style>
</head>
<body>

<!-- 正文开始 -->
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-header">项目查询</div>
        <div class="layui-card-body">
            <div class="layui-form toolbar">
                <div class="layui-form-item">
                    <div class="layui-inline ">
                        <label class="layui-form-label w-auto">项目类别：</label>
                        <div class="layui-input-inline mr0">
                            <select name="xiangmulb">
                                <option value=""></option>
                                <option value="待立项审核">all</option>
                                <option value="已完成">内销项目</option>
                                <option value="未完成">外销项目</option>
                                <option value="异常">B2B项目</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline ">
                        <label class="layui-form-label w-auto">项目名称：</label>
                        <div class="layui-input-inline mr0">
                            <input name="username" class="layui-input" type="text" placeholder="请输入"/>
                        </div>
                    </div>
                    <div class="layui-inline ">
                        <label class="layui-form-label w-auto">项目组长：</label>
                        <div class="layui-input-inline mr0">
                            <input name="username" class="layui-input" type="text" placeholder="请输入"/>
                        </div>
                    </div>
                    <div class="layui-inline ">
                        <label class="layui-form-label w-auto">项目负责人：</label>
                        <div class="layui-input-inline mr0">
                            <input name="username" class="layui-input" type="text" placeholder="请输入"/>
                        </div>
                    </div>
                    <div class="layui-inline ">
                        <label class="layui-form-label w-auto">立项时间：</label>
                        <div class="layui-input-inline mr0" style="width: 175px;">
                            <input type="text" class="layui-input" id="lixiangTime" placeholder="选择范围时间">
                        </div>
                    </div>
                    <div class="layui-inline ">
                        <label class="layui-form-label w-auto">项目状态：</label>
                        <div class="layui-input-inline mr0">
                            <select name="projectStatus">
                                <option value=""></option>
                                <option value="待立项审核">待立项审核</option>
                                <option value="已完成">已完成</option>
                                <option value="未完成">未完成</option>
                                <option value="异常">异常</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline ">
                        <button class="layui-btn icon-btn" lay-filter="formSubSearchUser" lay-submit>
                            <i class="layui-icon">&#xe615;</i>搜索
                        </button>
<!--                        <button id="btnAddUser" class="layui-btn icon-btn"><i class="layui-icon">&#xe654;</i>添加</button>-->
                    </div>
                </div>
            </div>
<!--            橙色标签线-->
            <hr class="layui-bg-orange">
            <table class="layui-table" id="projectOverview" lay-filter="projectOverview"></table>
        </div>
    </div>
</div>

<!--            头部工具栏新增删除按钮-->
<script type="text/html" id="toolbarDemo">
    <div class="layui-btn-container">
        <button class="layui-btn layui-btn-sm layui-btn-radius" lay-event="add"><i class="layui-icon layui-icon-add-1"></i>新增</button>
        <button class="layui-btn layui-btn-sm layui-btn-radius" lay-event="del"><i class="layui-icon layui-icon-delete"></i>删除</button>
    </div>
</script>

<!--            单元表格内部的编辑删除-->
<script type="text/html" id="barDemo1">
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>

<!--            甘特图表格内部查看按钮-->
<script type="text/html" id="barDemo2">
    <a class="layui-btn layui-btn-xs" lay-event="chakan">点击按钮查看</a>
</script>

<!-- js部分 -->
<script type="text/javascript" src="/SKYWORTH_PMS/iframe/assets/libs/layui/layui.js"></script>
<script
        src="http://code.jquery.com/jquery-2.2.4.js"
        integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
        crossorigin="anonymous"></script>
<script type="text/javascript" src="/SKYWORTH_PMS/iframe/assets/js/common.js?v=312"></script>

<!--自定义js-->
<script>
    layui.use(['layer', 'form', 'table', 'util', 'laydate','admin','index'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;
        var form = layui.form;
        var table = layui.table;
        var util = layui.util;
        var laydate = layui.laydate;
        var admin = layui.admin;
        var index = layui.index;

        /**
         * 范围时间选择
         */
        laydate.render({
            elem: '#lixiangTime'
            ,range: true
        });
        var insTb = table.render({
            elem: '#projectOverview',
            data:[{numbers:20,username:"456"}],
            page: true,
            cellMinWidth: 100,
            toolbar: '#toolbarDemo',
            cols: [[
                {type:'radio'},
                {type: 'numbers', title: '#' ,align:"center"},
                {field: 'username', sort: true, title: '项目类别' ,align:"center"},
                {field: 'nickName', title: '项目名称' ,align:"center"},
                {field: 'sex', title: '项目组长' ,align:"center"},
                {field: 'sex', title: '项目负责人' ,align:"center"},
                {field: 'sex', sort: true, title: '项目立项时间' ,align:"center"},
                {field: 'sex', sort: true, title: '项目状态' ,align:"center"},
                {field: 'sex', title: '产品立项书' ,align:"center"},
                {field: 'sex', title: '甘特图' ,toolbar: '#barDemo2',align:"center"},
                {field: 'right', title:'操作', toolbar: '#barDemo1', width:150,align:"center"}
                // {
                //     field: 'createTime', sort: true, templet: function (d) {
                //         return util.toDateString(d.createTime);
                //     }, title: '创建时间'
                // },
                // {field: 'state', sort: true, templet: '#tableStateUser', title: '状态' ,align:"center"},
                // {align: 'center', toolbar: '#tableBarUser', title: '操作', minWidth: 200}
            ]]
        });

        /**
         * 头工具栏事件
         */
        table.on('toolbar(projectOverview)', function(obj){
            var checkStatus = table.checkStatus(obj.config.id);
            switch(obj.event){
                case 'add':
                    var data = checkStatus.data;
                    // layer.alert(JSON.stringify(data));
                    index.openTab({
                        title: '新增产品项目立项',
                        url: '/SKYWORTH_PMS/iframe/page/New-product-items/addPin-all.html',
                        end: function() {
                            //  do something
                            // table.reload('userTable');
                        }
                    });
                    break;
                case 'del':
                    console.log(table.checkStatus("projectOverview"));
                    console.log(checkStatus);
                    layer.confirm('确认删除所选项目吗？', function(index){
                        obj.del(table.checkStatus("projectOverview"));
                        layer.close(index);
                    });
                    // var data = checkStatus.data;
                    // layer.msg('选中了：'+ data.length + ' 个');
                    break;
                case 'isAll':
                    layer.msg(checkStatus.isAll ? '全选': '未全选');
                    break;
            }
        });

        /**
         * 监听行工具事件
         */
        table.on('tool(projectOverview)', function(obj){
            var data = obj.data;
            console.log(obj);
            if(obj.event === 'del'){
                layer.confirm('真的删除该项目么？', function(index){
                    obj.del();
                    layer.close(index);
                });
            } else if(obj.event === 'edit'){
                layer.prompt({
                    formType: 2
                    ,value: data.email
                }, function(value, index){
                    obj.update({
                        email: value
                    });
                    layer.close(index);
                });
            } else if (obj.event === 'chakan') {
                console.log("asdaasdasd");
            }
        });

    });
</script>
</body>

</html>